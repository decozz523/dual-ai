<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dual AI Chat (Bot R & Bot S)</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="layout">
      <header class="topbar">
        <div class="topbar-left">
          <button id="menuBtn" class="icon-btn" aria-label="Открыть меню">
            <span class="icon">☰</span>
          </button>
          <div class="title">
            <div class="h1">Dual AI Chat</div>
            <div class="subtitle">Bot R (рациональный) + Bot S (творческий) через OpenRouter</div>
          </div>
        </div>
        <div class="topbar-right">
          <div class="status-pill" id="status">Готов.</div>
          <button id="toggleViewBtn" class="btn btn-secondary">Перейти в чат</button>
          <button id="authBtn" class="btn btn-secondary">Войти</button>
        </div>
      </header>

      <main class="app">
        <section class="hero">
          <div>
            <div class="hero-title">Профессиональный чат для стратегий и идей</div>
            <div class="hero-subtitle">
              Пара ботов ведёт дискуссию с тобой: рациональный бот структурирует, творческий — расширяет
              варианты. Управляй настройками через меню.
            </div>
          <div class="hero-actions">
              <button id="openDrawerBtn" class="btn btn-secondary">Открыть настройки</button>
              <button id="enterChatBtn" class="btn btn-primary">Перейти в чат</button>
              <button id="newChatBtn" class="btn btn-primary">Новый диалог</button>
          </div>
          </div>
          <div class="hero-cards">
            <div class="info-card">
              <div class="info-title">Горячая клавиша</div>
              <div class="info-value">Ctrl / ⌘ + Enter</div>
              <div class="info-hint">Отправляй сообщение без мыши.</div>
            </div>
            <div class="info-card">
              <div class="info-title">Конфиденциальность</div>
              <div class="info-value">Только локально</div>
              <div class="info-hint">Настройки сохраняются в браузере.</div>
            </div>
            <div class="info-card">
              <div class="info-title">Режим диалога</div>
              <div class="info-value">Dual AI</div>
              <div class="info-hint">Bot R + Bot S ведут сессию.</div>
            </div>
          </div>
        </section>

        <section class="menu-sections">
          <div class="menu-card">
            <div class="menu-title">Сценарии работы</div>
            <div class="menu-text">
              Обсуждай стратегии, развивай идеи и быстро проверяй гипотезы в диалоге двух ИИ.
            </div>
          </div>
          <div class="menu-card">
            <div class="menu-title">Структурирование мыслей</div>
            <div class="menu-text">
              Bot R собирает логику и факты, а Bot S добавляет альтернативы и креативные варианты.
            </div>
          </div>
          <div class="menu-card">
            <div class="menu-title">Гибкие настройки</div>
            <div class="menu-text">
              В боковом меню ты управляешь авторизацией, моделью и количеством ходов ботов.
            </div>
          </div>
          <div class="menu-card">
            <div class="menu-title">Чат без отвлечений</div>
            <div class="menu-text">
              Переключайся в чистый режим мессенджера и возвращайся к главному меню в один клик.
            </div>
          </div>
        </section>

        <section class="chat" id="chatSection">
          <div id="messages" class="messages" aria-live="polite"></div>
        </section>

        <section class="composer">
          <div class="composer-head">
            <div>
              <div class="label">Сообщение</div>
              <div class="hint">Опиши задачу, контекст и ожидания — так ответы будут точнее.</div>
            </div>
            <div class="chip">Dual AI Mode</div>
          </div>
          <textarea
            id="input"
            rows="2"
            placeholder="Напиши сообщение…"
          ></textarea>
          <div class="row">
            <button id="sendBtn" class="btn btn-primary">Отправить</button>
            <button id="demoBtn" class="btn btn-secondary">Демо-вопрос</button>
          </div>
        </section>
      </main>
    </div>

    <div id="drawerOverlay" class="drawer-overlay" hidden></div>
    <aside id="drawer" class="drawer" aria-label="Настройки">
      <div class="drawer-head">
        <div>
          <div class="drawer-title">Меню</div>
          <div class="drawer-subtitle">Настройки, авторизация и управление</div>
        </div>
        <button id="closeDrawerBtn" class="icon-btn" aria-label="Закрыть меню">
          <span class="icon">✕</span>
        </button>
      </div>

      <section class="drawer-section">
        <div class="section-title">Авторизация</div>
        <div class="auth-status" id="authStatus">Аккаунт не привязан</div>
        <div class="auth-card" id="authCard" hidden>
          <img id="authAvatar" class="auth-avatar" alt="Google avatar" />
          <div class="auth-details">
            <div class="auth-name" id="authName">Google User</div>
            <div class="auth-email" id="authEmail">user@gmail.com</div>
            <div class="auth-meta" id="authMeta">Привязка активна</div>
          </div>
        </div>
        <button id="googleAuthBtn" class="btn btn-primary btn-google" type="button">
          <span class="icon">G</span>
          Привязать Google аккаунт
        </button>
        <button id="logoutBtn" class="btn btn-secondary" type="button" hidden>Отвязать аккаунт</button>
        <label class="field">
          <div class="label">Google Client ID</div>
          <input id="googleClientId" type="text" placeholder="xxxxx.apps.googleusercontent.com" />
          <div class="hint">Нужен для работы Google Identity Services.</div>
        </label>
        <div class="hint">
          Привязка даёт персонализацию и быстрый вход. Данные сохраняются локально в браузере.
        </div>
      </section>

      <section class="drawer-section">
        <div class="section-title">Подключение OpenRouter</div>
        <div class="field">
          <div class="label">OpenRouter API key</div>
          <div class="hint">
            Ключ хранится на сервере через Vercel Environment Variables и не вводится пользователем.
          </div>
        </div>

        <label class="field">
          <div class="label">Модель (OpenRouter slug)</div>
          <input id="model" type="text" value="arcee-ai/trinity-large-preview:free" />
          <div class="hint">Можно менять на любую доступную в твоём аккаунте.</div>
        </label>
      </section>

      <section class="drawer-section">
        <div class="section-title">Диалог</div>
        <label class="field">
          <div class="label">Авто-диалог ботов (ходов после твоего сообщения)</div>
          <input id="turns" type="number" min="0" max="10" value="0" />
          <div class="hint">0 = только один ответ каждого бота на твоё сообщение.</div>
        </label>
      </section>

      <section class="drawer-section">
        <div class="section-title">Управление</div>
        <div class="row">
          <button id="saveBtn" class="btn">Сохранить настройки</button>
          <button id="clearBtn" class="btn btn-secondary">Очистить чат</button>
        </div>
      </section>
    </aside>

    <script type="module" src="./app.js"></script>
  </body>
</html>


